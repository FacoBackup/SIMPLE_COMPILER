(()=>{var _=Object.create;var L=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var V=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty;var N=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,a)=>(typeof require<"u"?require:e)[a]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var M=(r,e,a,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let l of B(e))!U.call(r,l)&&l!==a&&L(r,l,{get:()=>e[l],enumerable:!(n=g(e,l))||n.enumerable});return r};var O=(r,e,a)=>(a=r!=null?_(V(r)):{},M(e||!r||!r.__esModule?L(a,"default",{value:r,enumerable:!0}):a,r));var u=class{_type;_symbolAddress;_line;_column;constructor(e,a,n,l){this._type=e,this._line=n,this._column=l,this._symbolAddress=a}get type(){return this._type}set type(e){this._type=e}get symbolAddress(){return this._symbolAddress}set symbolAddress(e){this._symbolAddress=e}get line(){return this._line}set line(e){this._line=e}get column(){return this._column}set column(e){this._column=e}#e(e){return(e<10?"0":"")+e}toString(){return`[${this.#e(this.type)}, ${this.symbolAddress>-1?this.#e(this.symbolAddress):"  "}, (${this.#e(this.line)}, ${this.#e(this.column)})]`}};var t=class{_term;_type;_line;_column;constructor(e,a,n,l){this._term=e,this._type=a,this._line=n,this._column=l}append(e,a){this._term+=e,this._type=a}get type(){return this._type}get line(){return this._line}get term(){return this._term}toString(){return"'"+this._term+"' ("+this._line+", "+this._column+")"}toToken(e){return e!=null?new u(this._type,e,this._line,this._column):new u(this._type,-1,this._line,this._column)}};var f=(h=>(h[h.END_OF_LINE=10]="END_OF_LINE",h[h.END_OF_INPUT=3]="END_OF_INPUT",h[h.ASSIGNMENT=11]="ASSIGNMENT",h[h.ADD=21]="ADD",h[h.SUBTRACT=22]="SUBTRACT",h[h.MULTIPLY=23]="MULTIPLY",h[h.DIVIDE=24]="DIVIDE",h[h.MODULO=25]="MODULO",h[h.EQ=31]="EQ",h[h.NE=32]="NE",h[h.GT=33]="GT",h[h.LT=34]="LT",h[h.GE=35]="GE",h[h.LE=36]="LE",h[h.VARIABLE=41]="VARIABLE",h[h.INTEGER=51]="INTEGER",h[h.REM=61]="REM",h[h.INPUT=62]="INPUT",h[h.LET=63]="LET",h[h.PRINT=64]="PRINT",h[h.GOTO=65]="GOTO",h[h.IF=66]="IF",h[h.END=67]="END",h[h.ERROR=99]="ERROR",h))(f||{}),s=f;var T=class extends Error{column;line;message;constructor(e,a,n){super(`LINE: ${a};
COLUMN: ${n}`),this.line=a,this.column=n,this.message=e}};var b=class{error=!1;source;symbolTable=new Map;tokens;lexeme;column=0;line=1;charGenerator;exceptions=[];constructor(e){this.source=e,this.tokens=[],this.symbolTable.clear(),this.error=!1,this.charGenerator=this.next()}addSymbolTable(e){return this.symbolTable.has(e)||this.symbolTable.set(e,this.symbolTable.size),this.symbolTable.get(e)}addToken(){this.lexeme.type!=s.ERROR?this.lexeme.type===s.INTEGER||this.lexeme.type===s.VARIABLE?this.tokens.push(this.lexeme.toToken(this.addSymbolTable(this.lexeme.term))):this.tokens.push(this.lexeme.toToken()):(this.exceptions.push(new T(this.lexeme.toString(),this.line,this.column)),this.error=!0)}*next(){let e=this.source.split("").reverse();for(;e.length>0;){let a=e.pop();a==="\r"&&(a=e.pop()),this.column++,yield a}this.source=null,yield 0}analyze(){for(;this.source!=null;)this.q0();return this.exceptions}q0(){let e=this.charGenerator.next().value;switch(e){case 0:this.q04();break;case`
`:this.q03();break;case" ":break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"+":this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q99()}}q01(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.lexeme.append(e,s.INTEGER),this.q01();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme.append(e,s.ERROR),this.q01()}}q02(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme.append(e,s.ERROR),this.q02()}}q03(){this.lexeme=new t(`
`,s.END_OF_LINE,this.line,this.column),this.addToken(),this.line++,this.column=0}q04(){this.lexeme=new t("\0",s.END_OF_INPUT,this.line,this.column),this.addToken()}q05(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q05()}}q06(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"=":this.lexeme.append(e,s.EQ),this.q09();break;default:this.lexeme.append(e,s.ERROR),this.q06()}}q07(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"=":this.lexeme.append(e,s.LE),this.q10();break;default:this.lexeme.append(e,s.ERROR),this.q07()}}q08(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"=":this.lexeme.append(e,s.GE),this.q11();break;default:this.lexeme.append(e,s.ERROR),this.q08()}}q09(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q09()}}q10(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q10()}}q11(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q11()}}q12(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q12()}}q13(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"=":this.lexeme.append(e,s.NE),this.q12();break;default:this.lexeme.append(e,s.ERROR),this.q13()}}q14(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"e":this.lexeme.append(e,s.ERROR),this.q15();break;default:this.lexeme.append(e,s.ERROR),this.q14()}}q15(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"m":this.lexeme.append(e,s.REM),this.q31();break;default:this.lexeme.append(e,s.ERROR),this.q15()}}q16(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"f":this.lexeme.append(e,s.IF),this.q32();break;case"n":this.lexeme.append(e,s.ERROR),this.q17();break;default:this.lexeme.append(e,s.ERROR),this.q16()}}q17(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"p":this.lexeme.append(e,s.ERROR),this.q18();break;default:this.lexeme.append(e,s.ERROR),this.q17()}}q18(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"u":this.lexeme.append(e,s.ERROR),this.q19();break;default:this.lexeme.append(e,s.ERROR),this.q18()}}q19(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.INPUT),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q19()}}q20(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"e":this.lexeme.append(e,s.ERROR),this.q21();break;default:this.lexeme.append(e,s.ERROR),this.q20()}}q21(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.LET),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q21()}}q22(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"r":this.lexeme.append(e,s.ERROR),this.q23();break;default:this.lexeme.append(e,s.ERROR),this.q22()}}q23(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"i":this.lexeme.append(e,s.ERROR),this.q24();break;default:this.lexeme.append(e,s.ERROR),this.q23()}}q24(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"n":this.lexeme.append(e,s.ERROR),this.q25();break;default:this.lexeme.append(e,s.ERROR),this.q24()}}q25(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.PRINT),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q25()}}q26(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"o":this.lexeme.append(e,s.ERROR),this.q27();break;default:this.lexeme.append(e,s.ERROR),this.q26()}}q27(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.ERROR),this.q28();break;default:this.lexeme.append(e,s.ERROR),this.q27()}}q28(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"o":this.lexeme.append(e,s.GOTO),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q28()}}q29(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"n":this.lexeme.append(e,s.ERROR),this.q30();break;default:this.lexeme.append(e,s.ERROR),this.q29()}}q30(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"d":this.lexeme.append(e,s.END),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q30()}}q31(){switch(this.charGenerator.next().value){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;default:this.q31()}}q32(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;default:this.lexeme.append(e,s.ERROR),this.q32()}}q99(){let e=this.charGenerator.next().value;switch(e){case 0:this.q04();break;case`
`:this.q03();break;case" ":break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme.append(e,s.ERROR),this.q99()}}};var D=(c=>(c[c.LET=0]="LET",c[c.INTEGER=1]="INTEGER",c[c.END_OF_LINE=2]="END_OF_LINE",c[c.END_OF_INPUT=3]="END_OF_INPUT",c[c.ASSIGNMENT=4]="ASSIGNMENT",c[c.ADD=5]="ADD",c[c.SUBTRACT=6]="SUBTRACT",c[c.MULTIPLY=7]="MULTIPLY",c[c.DIVIDE=8]="DIVIDE",c[c.MODULO=9]="MODULO",c[c.EQ=10]="EQ",c[c.NE=11]="NE",c[c.GT=12]="GT",c[c.LT=13]="LT",c[c.GE=14]="GE",c[c.LE=15]="LE",c[c.VARIABLE=16]="VARIABLE",c[c.REM=17]="REM",c[c.INPUT=18]="INPUT",c[c.PRINT=19]="PRINT",c[c.GOTO=20]="GOTO",c[c.IF=21]="IF",c[c.END=22]="END",c))(D||{}),i=D;var d=class{_token;constructor(e){this._token=e}getSymbol(){if(!this._token)return null;switch(this._token.type){case s.LET:return i.LET;case s.VARIABLE:return i.VARIABLE;case s.INTEGER:return i.INTEGER;case s.INPUT:return i.INPUT;case s.PRINT:return i.PRINT;case s.ERROR:return null;case s.END_OF_LINE:return i.END_OF_LINE;case s.END_OF_INPUT:return i.END_OF_INPUT;case s.ASSIGNMENT:return i.ASSIGNMENT;case s.ADD:return i.ADD;case s.SUBTRACT:return i.SUBTRACT;case s.MULTIPLY:return i.MULTIPLY;case s.DIVIDE:return i.DIVIDE;case s.MODULO:return i.MODULO;case s.EQ:return i.EQ;case s.NE:return i.NE;case s.GT:return i.GT;case s.LT:return i.LT;case s.GE:return i.GE;case s.LE:return i.LE;case s.REM:return i.REM;case s.GOTO:return i.GOTO;case s.IF:return i.IF;case s.END:return i.END}return null}get token(){return this._token}};var o=class extends Error{line;column;message;static UNEXPECTED_EOL="Unexpected end of line";static EXPECTED_END="Expected 'end' keyword but found EOF";static EXPECTED_INTEGER="Expected integer but found otherwise";static EXPECTED_ASSIGNABLE="Expected assignable but found otherwise";static UNEXPECTED_ERROR="Unexpected error";static EXPECTED_EXPRESSION="Expected expression but found otherwise";static EXPECTED_VARIABLE_DECLARATION="Expected variable declaration but found otherwise";static MISSING_LINE_ENUMERATION="Missing line enumeration";static UNEXPECTED_COMMAND_BEFORE_COMMAND="Unexpected command before command";constructor(e,a,n){super(` Syntactic analysis error: 
- LINE: ${a}
- COLUMN: ${n}
- MESSAGE: ${e}`),this.line=a,this.column=n,this.message=e}};var m=class{tokens;currentToken;lineTokens;hasReachedEnd=!1;missingLineTokens;exceptions=[];originalTokens=[];isOnIf;stack=[];skipErrors=!0;shift(){let e=this.tokens[0];return this.tokens.splice(0,1),this.currentToken=e,e}extractLineTokens(){this.originalTokens=[...this.tokens];let e=[],a=!1,n=[];this.tokens.forEach((l,k)=>{if(l.type===s.END_OF_LINE){a=!0;return}(a||k===0)&&l.type===s.INTEGER?(e.push(l),a=!1):(a||k===0)&&l.type!==s.INTEGER&&l.type!==s.REM&&(n.push(l.line),a=!1)}),this.missingLineTokens=n,this.tokens=this.tokens.filter(l=>!e.includes(l)),this.lineTokens=e}throwError(e,a=this.currentToken.line,n=this.currentToken.column){this.exceptions.push(this.createError(e,a,n)),this.skipErrors||this.skipLine()}skipLine(){let e=this.currentToken;for(;e!=null&&e.type!==s.END_OF_LINE;)e=this.shift();this.isOnIf=!1,this.stack.length=0}};var p=class r extends m{static ASSIGNABLE=[s.VARIABLE,s.INTEGER];static EXCLUSIVE_LINE_REQUIRED=[i.END,i.IF,i.LET];static REQUIRES_INTEGER_OR_VARIABLE=[i.ADD,i.SUBTRACT,i.MULTIPLY,i.DIVIDE,i.MODULO,i.EQ,i.NE,i.GT,i.LT,i.GE,i.LE];static FUNCTIONS=[i.GOTO,i.PRINT,i.LET,i.END_OF_LINE];static SIGNS=[s.ADD,s.SUBTRACT];constructor(e){super(),this.tokens=[...e]}analyze(){for(this.extractLineTokens(),this.missingLineTokens.forEach(e=>{this.throwError(o.MISSING_LINE_ENUMERATION,e,0)});this.tokens.length>0;){let e=this.shift(),a=new d(this.tokens[0]),l=new d(e).getSymbol();if(e.type==s.END_OF_INPUT&&this.hasReachedEnd)return this.exceptions;switch(this.checkForInconclusiveOperator(a),this.throwIfSymbolIsInvalid(l),this.throwIfStackIsNotEmpty(l),this.throwIfStackIsEmpty(l),this.throwIfMissingExpression(l),l){case i.END_OF_LINE:this.handleEndOfLine();break;case i.ASSIGNMENT:this.handleAssignment(a);break;case i.ADD:case i.SUBTRACT:this.handleSigns(a);break;case i.MULTIPLY:case i.DIVIDE:case i.MODULO:case i.EQ:case i.NE:case i.GT:case i.LT:case i.GE:case i.LE:this.handleOperation(a);break;case i.PRINT:this.handlePrint(a);break;case i.INPUT:this.handlePrint(a);break;case i.IF:this.stack.push(e),this.isOnIf=!0;break;case i.VARIABLE:case i.LET:case i.INTEGER:this.stack.push(e);break;case i.GOTO:this.handleGOTO(a);break;case i.REM:this.handleComment();break;case i.END:this.handleEnd();break}}return this.hasReachedEnd||this.throwError(o.EXPECTED_END),this.exceptions}throwIfStackIsNotEmpty(e){r.EXCLUSIVE_LINE_REQUIRED.includes(e)&&this.stack.length>0&&this.throwError(o.UNEXPECTED_COMMAND_BEFORE_COMMAND)}checkForInconclusiveOperator(e){switch(e.getSymbol()){case i.ADD:case i.SUBTRACT:case i.MULTIPLY:case i.DIVIDE:case i.MODULO:case i.EQ:case i.NE:case i.GT:case i.LT:case i.GE:case i.LE:this.stack.push(this.currentToken,e.token);break}}createError(e,a,n){return new o(e,a,n)}handleEnd(){(this.tokens[0]==null&&this.tokens[0].type!==s.END_OF_INPUT||this.stack.length>0)&&this.throwError(o.UNEXPECTED_EOL),this.hasReachedEnd=!0}handleComment(){this.skipLine()}handleGOTO(e){e.getSymbol()!==i.INTEGER&&this.throwError(o.EXPECTED_INTEGER)}handleEndOfLine(){this.stack.length>0&&!r.ASSIGNABLE.includes(this.stack[this.stack.length-1].type)&&this.throwError(o.EXPECTED_ASSIGNABLE),this.isOnIf&&this.stack.length===0&&this.throwError(o.EXPECTED_EXPRESSION),this.isOnIf=!1,this.stack.length=0}handleAssignment(e){let a=!1,n=!1;this.stack.forEach(l=>{l.type===s.VARIABLE&&(a=!0),l.type===s.LET&&(n=!0)}),(!n||!a||!r.ASSIGNABLE.includes(e.token.type)&&!r.SIGNS.includes(e.token.type))&&this.throwError(o.EXPECTED_VARIABLE_DECLARATION),this.stack.length=0,this.stack.push(this.currentToken)}throwIfStackIsEmpty(e){r.REQUIRES_INTEGER_OR_VARIABLE.includes(e)&&this.stack.length===0&&this.throwError(o.EXPECTED_ASSIGNABLE)}throwIfSymbolIsInvalid(e){e==null&&this.throwError(o.UNEXPECTED_ERROR)}handleOperation(e){(!r.ASSIGNABLE.includes(e.token.type)||!r.ASSIGNABLE.includes(this.stack[this.stack.length-1].type))&&this.throwError(o.EXPECTED_ASSIGNABLE)}handlePrint(e){e.getSymbol()!==i.VARIABLE&&this.throwError(o.EXPECTED_ASSIGNABLE)}handleSigns(e){r.ASSIGNABLE.includes(e.token.type)||this.throwError(o.EXPECTED_ASSIGNABLE);let a=this.stack.length===0,n=!r.ASSIGNABLE.includes(this.stack[this.stack.length-1].type),l=this.stack[this.stack.length-1].type!==s.ASSIGNMENT;(a||l&&n)&&this.throwError(o.UNEXPECTED_ERROR)}throwIfMissingExpression(e){let a=this.stack.length===0||this.stack.length>0&&this.stack[this.stack.length-1].type===s.IF,n=r.FUNCTIONS.includes(e);this.isOnIf&&a&&n&&this.throwError(o.EXPECTED_EXPRESSION)}};var E=class extends Error{line;column;message;static GOTO_LINE_NOT_FOUND="GOTO command line not found";static VARIABLE_DECLARATION_NOT_FOUND="Variable declaration not found";constructor(e,a,n){super(` Semantic analysis error: 
- LINE: ${a}
- COLUMN: ${n}
- MESSAGE: ${e}`),this.line=a,this.column=n,this.message=e}};var R=class extends m{reversedSymbolMap=new Map;symbolMap;declared=new Map;constructor(e,a){super(),this.tokens=e,this.symbolMap=a,Array.from(a.entries()).forEach(n=>{this.reversedSymbolMap.set(n[1],n[0])}),this.skipErrors=!1}analyze(){for(this.extractLineTokens();this.tokens.length>0;){let e=this.shift(),a=new d(this.tokens[0]),l=new d(e).getSymbol();if(e.type==s.END_OF_INPUT&&this.hasReachedEnd)return this.exceptions;switch(l){case i.GOTO:this.handleGOTO(a);break;case i.VARIABLE:this.handleVariable();break;case i.LET:case i.INPUT:this.stack.push(e);break;case i.END_OF_LINE:this.stack.length=0;break}}return this.exceptions}handleVariable(){if(!this.declared.has(this.currentToken.symbolAddress)&&(this.stack[0]?.type===s.LET||this.stack[0]?.type===s.INPUT)){this.declared.set(this.currentToken.symbolAddress,this.currentToken.line),this.stack.length=0;return}else this.declared.has(this.currentToken.symbolAddress)&&(this.stack.length=0);let e=this.declared.get(this.currentToken.symbolAddress)==null,a=this.declared.get(this.currentToken.symbolAddress)===this.currentToken.line;(e||a)&&this.throwError(E.VARIABLE_DECLARATION_NOT_FOUND)}handleGOTO(e){let a=e.token.symbolAddress,n=this.reversedSymbolMap.get(a);this.lineTokens.find(k=>{let I=k.symbolAddress;return this.reversedSymbolMap.get(I)===n})==null&&this.throwError(E.GOTO_LINE_NOT_FOUND)}createError(e,a,n){return new E(e,a,n)}};var q=class{static compile(e){let a=e.split(`
`).filter(w=>w.replace(/(\s+)/g,"").length!==0).join(`
`),n=new b(a),l=n.analyze(),k=[],I=[];return l.length===0&&(k=new p(n.tokens).analyze(),k.length===0&&(I=new R(n.tokens,n.symbolTable).analyze())),{lexicalErrors:l,syntaxErrors:k,semanticErrors:I}}};var G=O(N("fs")),x=O(N("path"));async function v(){let r=process.argv[2],e=(await G.promises.readFile(x.resolve(__dirname+x.sep+r))).toString();e=e.split(`
`).filter(l=>l.replace(/(\s+)/g,"").length!==0).join(`
`);let a=q.compile(e),n=e.split(`
`);console.log(`
-----------------------------------------
`),console.log("Lexical errors: "),a.lexicalErrors.map(l=>{A(l,n)}),console.log(`
-----------------------------------------
`),console.log("Syntactic errors: "),a.syntaxErrors.map(l=>{A(l,n)}),console.log(`
-----------------------------------------
`),console.log("Semantic errors: "),a.semanticErrors.map(l=>{A(l,n)}),console.log(`
-----------------------------------------
`),a.semanticErrors.length===0&&a.syntaxErrors.length===0&&a.lexicalErrors.length===0&&console.log("\x1B[32mThe source-code provided is valid \x1B[0m")}v().catch(console.error);function A(r,e){console.log(`
    MESSAGE:\x1B[31m ${r.message} \x1B[0m
    LINE:\x1B[31m ${r.line} \x1B[0m
    COLUMN:\x1B[31m ${r.column} \x1B[0m
    LINE WITH ERROR ----> \x1B[31m ${e[r.line-1]} \x1B[0m
    `)}})();
