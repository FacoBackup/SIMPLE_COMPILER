(()=>{var H=Object.create;var $=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var Z=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty;var F=(h=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(h,{get:(e,i)=>(typeof require<"u"?require:e)[i]}):h)(function(h){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+h+'" is not supported')});var ee=(h,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of W(e))!J.call(h,r)&&r!==i&&$(h,r,{get:()=>e[r],enumerable:!(n=K(e,r))||n.enumerable});return h};var X=(h,e,i)=>(i=h!=null?H(Z(h)):{},ee(e||!h||!h.__esModule?$(i,"default",{value:h,enumerable:!0}):i,h));var f=class{_type;_symbolAddress;_line;_column;constructor(e,i,n,r){this._type=e,this._line=n,this._column=r,this._symbolAddress=i}get type(){return this._type}set type(e){this._type=e}get symbolAddress(){return this._symbolAddress}set symbolAddress(e){this._symbolAddress=e}get line(){return this._line}set line(e){this._line=e}get column(){return this._column}set column(e){this._column=e}#e(e){return(e<10?"0":"")+e}toString(){return`[${this.#e(this.type)}, ${this.symbolAddress>-1?this.#e(this.symbolAddress):"  "}, (${this.#e(this.line)}, ${this.#e(this.column)})]`}};var t=class{_term;_type;_line;_column;constructor(e,i,n,r){this._term=e,this._type=i,this._line=n,this._column=r}append(e,i){this._term+=e,this._type=i}get type(){return this._type}get line(){return this._line}get term(){return this._term}toString(){return"'"+this._term+"' ("+this._line+", "+this._column+")"}toToken(e){return e!=null?new f(this._type,e,this._line,this._column):new f(this._type,-1,this._line,this._column)}};var z=(o=>(o[o.END_OF_LINE=10]="END_OF_LINE",o[o.END_OF_INPUT=3]="END_OF_INPUT",o[o.ASSIGNMENT=11]="ASSIGNMENT",o[o.ADD=21]="ADD",o[o.SUBTRACT=22]="SUBTRACT",o[o.MULTIPLY=23]="MULTIPLY",o[o.DIVIDE=24]="DIVIDE",o[o.MODULO=25]="MODULO",o[o.EQ=31]="EQ",o[o.NE=32]="NE",o[o.GT=33]="GT",o[o.LT=34]="LT",o[o.GE=35]="GE",o[o.LE=36]="LE",o[o.VARIABLE=41]="VARIABLE",o[o.INTEGER=51]="INTEGER",o[o.REM=61]="REM",o[o.INPUT=62]="INPUT",o[o.LET=63]="LET",o[o.PRINT=64]="PRINT",o[o.GOTO=65]="GOTO",o[o.IF=66]="IF",o[o.END=67]="END",o[o.ERROR=99]="ERROR",o))(z||{}),s=z;var N=class extends Error{column;line;message;constructor(e,i,n){super(`LINE: ${i};
COLUMN: ${n}`),this.line=i,this.column=n,this.message=e}};var O=class{error=!1;source;symbolTable=new Map;tokens;lexeme;column=0;line=1;charGenerator;exceptions=[];constructor(e){this.source=e,this.tokens=[],this.symbolTable.clear(),this.error=!1,this.charGenerator=this.next()}addSymbolTable(e){return this.symbolTable.has(e)||this.symbolTable.set(e,this.symbolTable.size),this.symbolTable.get(e)}addToken(){this.lexeme.type!=s.ERROR?this.lexeme.type===s.INTEGER||this.lexeme.type===s.VARIABLE?this.tokens.push(this.lexeme.toToken(this.addSymbolTable(this.lexeme.term))):this.tokens.push(this.lexeme.toToken()):(this.exceptions.push(new N(this.lexeme.toString(),this.line,this.column)),this.error=!0)}*next(){let e=this.source.split("").reverse();for(;e.length>0;){let i=e.pop();i==="\r"&&(i=e.pop()),this.column++,yield i}this.source=null,yield 0}analyze(){for(;this.source!=null;)this.q0();return this.exceptions}q0(){let e=this.charGenerator.next().value;switch(e){case 0:this.q04();break;case`
`:this.q03();break;case" ":break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"+":this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q99()}}q01(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.lexeme.append(e,s.INTEGER),this.q01();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme.append(e,s.ERROR),this.q01()}}q02(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme.append(e,s.ERROR),this.q02()}}q03(){this.lexeme=new t(`
`,s.END_OF_LINE,this.line,this.column),this.addToken(),this.line++,this.column=0}q04(){this.lexeme=new t("\0",s.END_OF_INPUT,this.line,this.column),this.addToken()}q05(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q05()}}q06(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"=":this.lexeme.append(e,s.EQ),this.q09();break;default:this.lexeme.append(e,s.ERROR),this.q06()}}q07(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"=":this.lexeme.append(e,s.LE),this.q10();break;default:this.lexeme.append(e,s.ERROR),this.q07()}}q08(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"=":this.lexeme.append(e,s.GE),this.q11();break;default:this.lexeme.append(e,s.ERROR),this.q08()}}q09(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q09()}}q10(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q10()}}q11(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q11()}}q12(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;default:this.lexeme.append(e,s.ERROR),this.q12()}}q13(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"=":this.lexeme.append(e,s.NE),this.q12();break;default:this.lexeme.append(e,s.ERROR),this.q13()}}q14(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"e":this.lexeme.append(e,s.ERROR),this.q15();break;default:this.lexeme.append(e,s.ERROR),this.q14()}}q15(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"m":this.lexeme.append(e,s.REM),this.q31();break;default:this.lexeme.append(e,s.ERROR),this.q15()}}q16(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"f":this.lexeme.append(e,s.IF),this.q32();break;case"n":this.lexeme.append(e,s.ERROR),this.q17();break;default:this.lexeme.append(e,s.ERROR),this.q16()}}q17(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"p":this.lexeme.append(e,s.ERROR),this.q18();break;default:this.lexeme.append(e,s.ERROR),this.q17()}}q18(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"u":this.lexeme.append(e,s.ERROR),this.q19();break;default:this.lexeme.append(e,s.ERROR),this.q18()}}q19(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.INPUT),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q19()}}q20(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"e":this.lexeme.append(e,s.ERROR),this.q21();break;default:this.lexeme.append(e,s.ERROR),this.q20()}}q21(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.LET),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q21()}}q22(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"r":this.lexeme.append(e,s.ERROR),this.q23();break;default:this.lexeme.append(e,s.ERROR),this.q22()}}q23(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"i":this.lexeme.append(e,s.ERROR),this.q24();break;default:this.lexeme.append(e,s.ERROR),this.q23()}}q24(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"n":this.lexeme.append(e,s.ERROR),this.q25();break;default:this.lexeme.append(e,s.ERROR),this.q24()}}q25(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.PRINT),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q25()}}q26(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"o":this.lexeme.append(e,s.ERROR),this.q27();break;default:this.lexeme.append(e,s.ERROR),this.q26()}}q27(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"t":this.lexeme.append(e,s.ERROR),this.q28();break;default:this.lexeme.append(e,s.ERROR),this.q27()}}q28(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"o":this.lexeme.append(e,s.GOTO),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q28()}}q29(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;case"n":this.lexeme.append(e,s.ERROR),this.q30();break;default:this.lexeme.append(e,s.ERROR),this.q29()}}q30(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;case"d":this.lexeme.append(e,s.END),this.q32();break;default:this.lexeme.append(e,s.ERROR),this.q30()}}q31(){switch(this.charGenerator.next().value){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;default:this.q31()}}q32(){let e=this.charGenerator.next().value;switch(e){case 0:this.addToken(),this.q04();break;case`
`:this.addToken(),this.q03();break;case" ":this.addToken();break;default:this.lexeme.append(e,s.ERROR),this.q32()}}q99(){let e=this.charGenerator.next().value;switch(e){case 0:this.q04();break;case`
`:this.q03();break;case" ":break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":this.addToken(),this.lexeme=new t(e,s.INTEGER,this.line,this.column),this.q01();break;case"a":case"b":case"c":case"d":case"f":case"h":case"j":case"k":case"m":case"n":case"o":case"q":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q02();break;case"r":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q14();break;case"i":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q16();break;case"l":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q20();break;case"p":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q22();break;case"g":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q26();break;case"e":this.addToken(),this.lexeme=new t(e,s.VARIABLE,this.line,this.column),this.q29();break;case"+":this.addToken(),this.lexeme=new t(e,s.ADD,this.line,this.column),this.q05();break;case"-":this.addToken(),this.lexeme=new t(e,s.SUBTRACT,this.line,this.column),this.q05();break;case"*":this.addToken(),this.lexeme=new t(e,s.MULTIPLY,this.line,this.column),this.q05();break;case"/":this.addToken(),this.lexeme=new t(e,s.DIVIDE,this.line,this.column),this.q05();break;case"%":this.addToken(),this.lexeme=new t(e,s.MODULO,this.line,this.column),this.q05();break;case"=":this.addToken(),this.lexeme=new t(e,s.ASSIGNMENT,this.line,this.column),this.q06();break;case"<":this.addToken(),this.lexeme=new t(e,s.LT,this.line,this.column),this.q07();break;case">":this.addToken(),this.lexeme=new t(e,s.GT,this.line,this.column),this.q08();break;case"!":this.addToken(),this.lexeme=new t(e,s.ERROR,this.line,this.column),this.q13();break;default:this.lexeme.append(e,s.ERROR),this.q99()}}};var Y=(l=>(l[l.LET=0]="LET",l[l.INTEGER=1]="INTEGER",l[l.END_OF_LINE=2]="END_OF_LINE",l[l.END_OF_INPUT=3]="END_OF_INPUT",l[l.ASSIGNMENT=4]="ASSIGNMENT",l[l.ADD=5]="ADD",l[l.SUBTRACT=6]="SUBTRACT",l[l.MULTIPLY=7]="MULTIPLY",l[l.DIVIDE=8]="DIVIDE",l[l.MODULO=9]="MODULO",l[l.EQ=10]="EQ",l[l.NE=11]="NE",l[l.GT=12]="GT",l[l.LT=13]="LT",l[l.GE=14]="GE",l[l.LE=15]="LE",l[l.VARIABLE=16]="VARIABLE",l[l.REM=17]="REM",l[l.INPUT=18]="INPUT",l[l.PRINT=19]="PRINT",l[l.GOTO=20]="GOTO",l[l.IF=21]="IF",l[l.END=22]="END",l))(Y||{}),a=Y;var R=class{_token;constructor(e){this._token=e}getSymbol(){if(!this._token)return null;switch(this._token.type){case s.LET:return a.LET;case s.VARIABLE:return a.VARIABLE;case s.INTEGER:return a.INTEGER;case s.INPUT:return a.INPUT;case s.PRINT:return a.PRINT;case s.ERROR:return null;case s.END_OF_LINE:return a.END_OF_LINE;case s.END_OF_INPUT:return a.END_OF_INPUT;case s.ASSIGNMENT:return a.ASSIGNMENT;case s.ADD:return a.ADD;case s.SUBTRACT:return a.SUBTRACT;case s.MULTIPLY:return a.MULTIPLY;case s.DIVIDE:return a.DIVIDE;case s.MODULO:return a.MODULO;case s.EQ:return a.EQ;case s.NE:return a.NE;case s.GT:return a.GT;case s.LT:return a.LT;case s.GE:return a.GE;case s.LE:return a.LE;case s.REM:return a.REM;case s.GOTO:return a.GOTO;case s.IF:return a.IF;case s.END:return a.END}return null}get token(){return this._token}};var E=class extends Error{line;column;message;static UNEXPECTED_EOL="Unexpected end of line";static EXPECTED_END="Expected 'end' keyword but found EOF";static EXPECTED_INTEGER="Expected integer but found otherwise";static EXPECTED_ASSIGNABLE="Expected assignable but found otherwise";static UNEXPECTED_ERROR="Unexpected error";static EXPECTED_EXPRESSION="Expected expression but found otherwise";static EXPECTED_VARIABLE_DECLARATION="Expected variable declaration but found otherwise";static MISSING_LINE_ENUMERATION="Missing line enumeration";static UNEXPECTED_COMMAND_BEFORE_COMMAND="Unexpected command before command";constructor(e,i,n){super(` Syntactic analysis error: 
- LINE: ${i}
- COLUMN: ${n}
- MESSAGE: ${e}`),this.line=i,this.column=n,this.message=e}};var x=class{tokens;currentToken;lineTokens;hasReachedEnd=!1;missingLineTokens;exceptions=[];originalTokens=[];isOnIf;stack=[];skipErrors=!0;shift(){let e=this.tokens[0];return this.tokens.splice(0,1),this.currentToken=e,e}extractLineTokens(){this.originalTokens=[...this.tokens];let e=[],i=!1,n=[];this.tokens.forEach((r,c)=>{if(r.type===s.END_OF_LINE){i=!0;return}(i||c===0)&&r.type===s.INTEGER?(e.push(r),i=!1):(i||c===0)&&r.type!==s.INTEGER&&r.type!==s.REM&&(n.push(r.line),i=!1)}),this.missingLineTokens=n,this.tokens=this.tokens.filter(r=>!e.includes(r)),this.lineTokens=e}throwError(e,i=this.currentToken.line,n=this.currentToken.column){this.exceptions.push(this.createError(e,i,n)),this.skipErrors||this.skipLine()}skipLine(){let e=this.currentToken;for(;e!=null&&e.type!==s.END_OF_LINE;)e=this.shift();this.isOnIf=!1,this.stack.length=0}};var D=class h extends x{static ASSIGNABLE=[s.VARIABLE,s.INTEGER];static EXCLUSIVE_LINE_REQUIRED=[a.END,a.IF,a.LET];static REQUIRES_INTEGER_OR_VARIABLE=[a.ADD,a.SUBTRACT,a.MULTIPLY,a.DIVIDE,a.MODULO,a.EQ,a.NE,a.GT,a.LT,a.GE,a.LE];static FUNCTIONS=[a.GOTO,a.PRINT,a.LET,a.END_OF_LINE];static SIGNS=[s.ADD,s.SUBTRACT];constructor(e){super(),this.tokens=[...e]}analyze(){for(this.extractLineTokens(),this.missingLineTokens.forEach(e=>{this.throwError(E.MISSING_LINE_ENUMERATION,e,0)});this.tokens.length>0;){let e=this.shift(),i=new R(this.tokens[0]),r=new R(e).getSymbol();if(e.type==s.END_OF_INPUT&&this.hasReachedEnd)return this.exceptions;switch(this.checkForInconclusiveOperator(i),this.throwIfSymbolIsInvalid(r),this.throwIfStackIsNotEmpty(r),this.throwIfStackIsEmpty(r),this.throwIfMissingExpression(r),r){case a.END_OF_LINE:this.handleEndOfLine();break;case a.ASSIGNMENT:this.handleAssignment(i);break;case a.ADD:case a.SUBTRACT:this.handleSigns(i);break;case a.MULTIPLY:case a.DIVIDE:case a.MODULO:case a.EQ:case a.NE:case a.GT:case a.LT:case a.GE:case a.LE:this.handleOperation(i);break;case a.PRINT:this.handlePrint(i);break;case a.INPUT:this.handlePrint(i);break;case a.IF:this.stack.push(e),this.isOnIf=!0;break;case a.VARIABLE:case a.LET:case a.INTEGER:this.stack.push(e);break;case a.GOTO:this.handleGOTO(i);break;case a.REM:this.handleComment();break;case a.END:this.handleEnd();break}}return this.hasReachedEnd||this.throwError(E.EXPECTED_END),this.exceptions}throwIfStackIsNotEmpty(e){h.EXCLUSIVE_LINE_REQUIRED.includes(e)&&this.stack.length>0&&this.throwError(E.UNEXPECTED_COMMAND_BEFORE_COMMAND)}checkForInconclusiveOperator(e){switch(e.getSymbol()){case a.ADD:case a.SUBTRACT:case a.MULTIPLY:case a.DIVIDE:case a.MODULO:case a.EQ:case a.NE:case a.GT:case a.LT:case a.GE:case a.LE:this.stack.push(this.currentToken,e.token);break}}createError(e,i,n){return new E(e,i,n)}handleEnd(){(this.tokens[0]==null&&this.tokens[0].type!==s.END_OF_INPUT||this.stack.length>0)&&this.throwError(E.UNEXPECTED_EOL),this.hasReachedEnd=!0}handleComment(){this.skipLine()}handleGOTO(e){e.getSymbol()!==a.INTEGER&&this.throwError(E.EXPECTED_INTEGER)}handleEndOfLine(){this.stack.length>0&&!h.ASSIGNABLE.includes(this.stack[this.stack.length-1].type)&&this.throwError(E.EXPECTED_ASSIGNABLE),this.isOnIf&&this.stack.length===0&&this.throwError(E.EXPECTED_EXPRESSION),this.isOnIf=!1,this.stack.length=0}handleAssignment(e){let i=!1,n=!1;this.stack.forEach(r=>{r.type===s.VARIABLE&&(i=!0),r.type===s.LET&&(n=!0)}),(!n||!i||!h.ASSIGNABLE.includes(e.token.type)&&!h.SIGNS.includes(e.token.type))&&this.throwError(E.EXPECTED_VARIABLE_DECLARATION),this.stack.length=0,this.stack.push(this.currentToken)}throwIfStackIsEmpty(e){h.REQUIRES_INTEGER_OR_VARIABLE.includes(e)&&this.stack.length===0&&this.throwError(E.EXPECTED_ASSIGNABLE)}throwIfSymbolIsInvalid(e){e==null&&this.throwError(E.UNEXPECTED_ERROR)}handleOperation(e){(!h.ASSIGNABLE.includes(e.token.type)||!h.ASSIGNABLE.includes(this.stack[this.stack.length-1].type))&&this.throwError(E.EXPECTED_ASSIGNABLE)}handlePrint(e){e.getSymbol()!==a.VARIABLE&&this.throwError(E.EXPECTED_ASSIGNABLE)}handleSigns(e){h.ASSIGNABLE.includes(e.token.type)||this.throwError(E.EXPECTED_ASSIGNABLE);let i=this.stack.length===0,n=!h.ASSIGNABLE.includes(this.stack[this.stack.length-1].type),r=this.stack[this.stack.length-1].type!==s.ASSIGNMENT;(i||r&&n)&&this.throwError(E.UNEXPECTED_ERROR)}throwIfMissingExpression(e){let i=this.stack.length===0||this.stack.length>0&&this.stack[this.stack.length-1].type===s.IF,n=h.FUNCTIONS.includes(e);this.isOnIf&&i&&n&&this.throwError(E.EXPECTED_EXPRESSION)}};var L=class extends Error{line;column;message;static GOTO_LINE_NOT_FOUND="GOTO command line not found";static VARIABLE_DECLARATION_NOT_FOUND="Variable declaration not found";constructor(e,i,n){super(` Semantic analysis error: 
- LINE: ${i}
- COLUMN: ${n}
- MESSAGE: ${e}`),this.line=i,this.column=n,this.message=e}};var G=class extends x{reversedSymbolMap=new Map;symbolMap;declared=new Map;constructor(e,i){super(),this.tokens=e,this.symbolMap=i,Array.from(i.entries()).forEach(n=>{this.reversedSymbolMap.set(n[1],n[0])}),this.skipErrors=!1}analyze(){for(this.extractLineTokens();this.tokens.length>0;){let e=this.shift(),i=new R(this.tokens[0]),r=new R(e).getSymbol();if(e.type==s.END_OF_INPUT&&this.hasReachedEnd)return this.exceptions;switch(r){case a.GOTO:this.handleGOTO(i);break;case a.VARIABLE:this.handleVariable();break;case a.LET:case a.INPUT:this.stack.push(e);break;case a.END_OF_LINE:this.stack.length=0;break}}return this.exceptions}handleVariable(){if(!this.declared.has(this.currentToken.symbolAddress)&&(this.stack[0]?.type===s.LET||this.stack[0]?.type===s.INPUT)){this.declared.set(this.currentToken.symbolAddress,this.currentToken.line),this.stack.length=0;return}else this.declared.has(this.currentToken.symbolAddress)&&(this.stack.length=0);let e=this.declared.get(this.currentToken.symbolAddress)==null,i=this.declared.get(this.currentToken.symbolAddress)===this.currentToken.line;(e||i)&&this.throwError(L.VARIABLE_DECLARATION_NOT_FOUND)}handleGOTO(e){let i=e.token.symbolAddress,n=this.reversedSymbolMap.get(i);this.lineTokens.find(c=>{let m=c.symbolAddress;return this.reversedSymbolMap.get(m)===n})==null&&this.throwError(L.GOTO_LINE_NOT_FOUND)}createError(e,i,n){return new L(e,i,n)}};var _=class extends Error{column;line;message;constructor(e,i,n){super(`LINE: ${i};
COLUMN: ${n}`),this.line=i,this.column=n,this.message=e}};var j=(p=>(p.READ="+10",p.WRITE="+11",p.LOAD="+20",p.STORE="+21",p.ADD="+30",p.SUBTRACT="+31",p.DIVIDE="+32",p.MULTIPLY="+33",p.MODULE="+34",p.BRANCH="+40",p.BRANCH_NEG="+41",p.BRANCH_ZERO="+42",p.HALT="+4300",p))(j||{}),d=j;var B=class{token;index;currentLine;previousToken;constructor(e,i,n){this.token=e,this.previousToken=e,this.index=n}getPlaceholder(){return"%"+this.index+"%"}getReplacement(){return this.currentLine<10?"0"+this.currentLine:this.currentLine.toString()}getDeclaration(e,i){if(this.currentLine=i,this.token.type===s.INTEGER){let n=e.get(this.token.symbolAddress);return this.previousToken.type===s.SUBTRACT?"-000"+n:"+000"+n}else return"+0000"}};var b=class{_commandType;tokens=[];_line;constructor(e){this.tokens.push(...e),this._line=e[0],this.tokens.shift()}getLine(e){let i=e.get(this._line.symbolAddress);return parseInt(i)}getOriginalLine(){return this._line.line}get commandType(){return this._commandType}set commandType(e){this._commandType=e}getTokens(){return this.tokens}};var I=class h extends b{placeholder;static MARKER="GT";getCodeLines(e,i,n){return this.placeholder=h.MARKER+e+h.MARKER,`${d.BRANCH}${this.placeholder}`}getPlaceholder(){return this.placeholder}getTargetLine(e){return parseInt(e.get(this.tokens[1].symbolAddress))}};var w=class extends b{placeholder;targetLineToken;getCodeLines(e,i,n){let[r,c,m,u,T,A]=this.tokens;this.placeholder=I.MARKER+e+I.MARKER,this.targetLineToken=A;let k="",q=i[c.symbolAddress].getPlaceholder(),g=i[u.symbolAddress].getPlaceholder();switch(m.type){case s.EQ:k=`${d.LOAD}${q}`,k+=`${d.SUBTRACT}${g}`,k+=`${d.BRANCH_ZERO}${this.placeholder}`;break;case s.NE:k=`${d.LOAD}${q}`,k+=`${d.SUBTRACT}${g}`,k+=`${d.BRANCH_NEG}${this.placeholder}`,k+=`${d.LOAD}${g}`,k+=`${d.SUBTRACT}${q}`,k+=`${d.BRANCH_NEG}${this.placeholder}`;break;case s.LT:k=`${d.LOAD}${q}`,k+=`${d.SUBTRACT}${g}`,k+=`${d.BRANCH_NEG}${this.placeholder}`;break;case s.GT:k=`${d.LOAD}${g}`,k+=`${d.SUBTRACT}${q}`,k+=`${d.BRANCH_NEG}${this.placeholder}`;break}return k}getPlaceholder(){return this.placeholder}getTargetLine(e){return parseInt(e.get(this.targetLineToken.symbolAddress))}};var M=class{static process(e,i){let n=e.map(u=>u.getTokens()).flat(),r={},c={};this.prepare(n,r,i,c);let m=this.generateCode(e,r,i,c);return this.replaceGotoLines(e,i,m,c),m=this.replaceTemporaryMarkers(r,m,i),m+d.HALT}static replaceTemporaryMarkers(e,i,n){let r=Object.entries(e),c=i.split(`
`).length;return r.forEach(m=>{i+=m[1].getDeclaration(n,c)+`
`,c++}),r.forEach(m=>{i.replaceAll(m[1].getPlaceholder(),m[1].getReplacement())}),i}static generateCode(e,i,n,r){let c=0,m="";for(let u=0;u<e.length;u++){let T=e[u],A=T.getCodeLines(c,i,n),k=T.getLine(n),q=T.getLine(n);r[q]=k,c+=A.split(`
`).length,m+=A+`
`}return m}static prepare(e,i,n,r){for(let c=0;c<e.length;c++){let m=e[c],u=c-1>=0?e[c-1]:void 0;if(m.type===s.VARIABLE||m.type===s.INTEGER)if(u?.type!==s.GOTO)i[m.symbolAddress]=new B(m,u,c);else{let T=parseInt(n.get(m.symbolAddress));r[T]=-1}}}static replaceGotoLines(e,i,n,r){for(let c=0;c<e.length;c++){let m=e[c];if(m instanceof I||m instanceof w){let u=m.getTargetLine(i);n.replaceAll(m.getPlaceholder(),r[u].toString())}}}};var V=class extends b{getCodeLines(e,i,n){let r=[];for(let c=0;c<this.tokens.length;c++)if(this.tokens[c].type===s.ASSIGNMENT){r.push(this.tokens[c-1],this.tokens[c+1],this.tokens[c+2],this.tokens[c+3]),r.filter(u=>u!==void 0);break}switch(r.length){case 2:{let[c,m]=r,u=`${d.LOAD}${i[m.symbolAddress].getPlaceholder()}`;return u+=`${d.STORE}${i[c.symbolAddress].getPlaceholder()}`,u}case 3:{let[c,m,u]=r,T=`${d.LOAD}${i[u.symbolAddress].getPlaceholder()}`;return T+=`${d.STORE}${i[c.symbolAddress].getPlaceholder()}`,T}case 4:{let[c,m,u,T]=r,A=i[T.symbolAddress].getPlaceholder(),k=`${d.LOAD}${i[m.symbolAddress].getPlaceholder()}`;switch(u.type){case s.DIVIDE:k+=`${d.DIVIDE}${A}`;break;case s.ADD:k+=`${d.ADD}${A}`;break;case s.SUBTRACT:k+=`${d.SUBTRACT}${A}`;break;case s.MULTIPLY:k+=`${d.MULTIPLY}${A}`;break;case s.MODULO:k+=`${d.MODULE}${A}`;break}return k+=`${d.STORE}${i[c.symbolAddress].getPlaceholder()}`,k}}}};var C=class extends b{getCodeLines(e,i,n){let[r,c]=this.tokens;return`${d.WRITE}${i[c.symbolAddress].getPlaceholder()}`}};var S=class extends b{getCodeLines(e,i,n){let[r,c]=this.tokens;return`${d.READ}${i[c.symbolAddress].getPlaceholder()}`}};var v=class extends x{reversedSymbolMap=new Map;symbolMap;lines=[];currentLine=[];commands=[];code=null;constructor(e,i){super(),this.tokens=e,this.symbolMap=i,Array.from(i.entries()).forEach(n=>{this.reversedSymbolMap.set(n[1],n[0])})}getCode(){return this.code}analyze(){let e=!1;for(;this.tokens.length>0;){let i=this.shift();i.type===s.REM&&(e=!0),i.type===s.END_OF_LINE?(this.lines.push([...this.currentLine]),this.currentLine.length=0,e=!1):e||this.currentLine.push(this.currentToken)}for(let i=0;i<this.lines.length;i++){let n=this.lines[i];this.processLine(n)}return this.code=M.process(this.commands,this.reversedSymbolMap),this.exceptions}processLine(e){for(let i=0;i<e.length;i++){let n=e[i];switch(new R(n).getSymbol()){case a.GOTO:this.commands.push(new I(e));break;case a.IF:this.commands.push(new w(e));break;case a.LET:case a.ASSIGNMENT:this.commands.push(new V(e));break;case a.INPUT:this.commands.push(new S(e));break;case a.PRINT:this.commands.push(new C(e));break}}}createError(e,i,n){return new _(e,i,n)}};var U=class{static compile(e){let i=e.split(`
`).filter(T=>T.replace(/(\s+)/g,"").length!==0).join(`
`),n=new O(i),r=n.analyze(),c=[],m=[],u;if(r.length===0&&(c=new D(n.tokens).analyze()),c.length===0&&(m=new G(n.tokens,n.symbolTable).analyze()),m.length===0){let T=new v(n.tokens,n.symbolTable);T.analyze(),u=T.getCode()}return{lexicalErrors:r,syntaxErrors:c,semanticErrors:m,intermediateCode:u}}};var Q=X(F("fs")),y=X(F("path"));async function se(){let h=process.argv[2],e=(await Q.promises.readFile(y.resolve(__dirname+y.sep+h))).toString();e=e.split(`
`).filter(r=>r.replace(/(\s+)/g,"").length!==0).join(`
`);let i=U.compile(e),n=e.split(`
`);console.log(`
-----------------------------------------
`),console.log("Lexical errors: "),i.lexicalErrors.map(r=>{P(r,n)}),console.log(`
-----------------------------------------
`),console.log("Syntactic errors: "),i.syntaxErrors.map(r=>{P(r,n)}),console.log(`
-----------------------------------------
`),console.log("Semantic errors: "),i.semanticErrors.map(r=>{P(r,n)}),console.log(`
-----------------------------------------
`),i.semanticErrors.length===0&&i.syntaxErrors.length===0&&i.lexicalErrors.length===0&&console.log("\x1B[32mThe source-code provided is valid \x1B[0m")}se().catch(console.error);function P(h,e){console.log(`
    MESSAGE:\x1B[31m ${h.message} \x1B[0m
    LINE:\x1B[31m ${h.line} \x1B[0m
    COLUMN:\x1B[31m ${h.column} \x1B[0m
    LINE WITH ERROR ----> \x1B[31m ${e[h.line-1]} \x1B[0m
    `)}})();
